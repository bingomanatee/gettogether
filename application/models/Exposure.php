<?php

class Gettogether_Model_Exposure extends Gettogether_Model_Abstract implements Gettogether_Model_IF {

    protected $table_name = 'exposure';

    protected function _create_table() {
        $sql = <<<SQL

CREATE TABLE `exposure` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `label` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `grants` text NOT NULL,
  `weight` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

INSERT INTO `exposure` VALUES(1, 'control_freak', 'Total Organizer Control', 'The group is totally organizer managed. The group itself is not listed, invite only, and only organizers can create events. Events are also invite only.', '[{"task":"add member","can":"0","role":"assistant organizer"},{"task":"add member","can":"0","role":"editor"},{"task":"add member","can":"1","role":"organizer"},{"task":"add member","can":"0","role":"member"},{"task":"create event","can":"0","role":"editor"},{"task":"create event","can":"0","role":"assistant organizer"},{"task":"create event","can":"1","role":"organizer"},{"task":"create event","can":"0","role":"member"},{"task":"edit event","can":"1","role":"editor"},{"task":"edit event","can":"0","role":"member"},{"task":"edit event","can":"0","role":"assistant organizer"},{"task":"edit event","can":"1","role":"organizer"},{"task":"edit own event","can":"0","role":"assistant organizer"},{"task":"edit own event","can":"0","role":"editor"},{"task":"edit own event","can":"0","role":"member"},{"task":"edit own event","can":"1","role":"organizer"},{"task":"join","can":"1","role":"member"},{"task":"join event","can":"0","role":"assistant organizer"},{"task":"join event","can":"1","role":"organizer"},{"task":"join event","can":"0","role":"editor"},{"task":"join event","can":"0","role":"member"},{"task":"join group","can":"0","role":"member"},{"task":"join group","can":"0","role":"assistant organizer"},{"task":"join group","can":"1","role":"organizer"},{"task":"join group","can":"0","role":"editor"},{"task":"publish event","can":"0","role":"editor"},{"task":"publish event","can":"1","role":"organizer"},{"task":"publish event","can":"0","role":"member"},{"task":"publish event","can":"0","role":"assistant organizer"},{"task":"publixh event","can":"1","role":"organizer"},{"task":"publixh event","can":"0","role":"member"},{"task":"publixh event","can":"0","role":"assistant organizer"},{"task":"remove event","can":"0","role":"assistant organizer"},{"task":"remove event","can":"0","role":"member"},{"task":"remove event","can":"1","role":"organizer"},{"task":"remove event","can":"0","role":"editor"},{"task":"remove member","can":"0","role":"editor"},{"task":"remove member","can":"1","role":"organizer"},{"task":"remove member","can":"0","role":"member"},{"task":"remove member","can":"0","role":"assistant organizer"},{"task":"remove own event","can":"0","role":"assistant organizer"},{"task":"remove own event","can":"1","role":"organizer"},{"task":"remove own event","can":"0","role":"editor"},{"task":"remove own event","can":"0","role":"member"},{"task":"see group","can":"1","role":"member"},{"task":"see group","can":"0","role":"editor"},{"task":"see group","can":"0","role":"assistant organizer"},{"task":"see group","can":"1","role":"organizer"}]', -100);
INSERT INTO `exposure` VALUES(2, 'private_group', 'Private Group', 'The group is not listed and invite only. ', '[{"task":"join","can":"1","role":"member"},{"task":"join group","can":"0","role":""},{"task":"publixh event","can":"1","role":"organizer"},{"task":"see group","can":"0","role":""}]', -50);
INSERT INTO `exposure` VALUES(3, 'organizer_events', 'Organizer Controlled Events', 'Events in this group are invite only; organizers must register members to events, and events are not listed to members.', '[{"task":"create event","can":"0","role":"assistant organizer"},{"task":"create event","can":"0","role":"editor"},{"task":"create event","can":"0","role":""},{"task":"create event","can":"0","role":"member"},{"task":"create event","can":"1","role":"organizer"},{"task":"join","can":"1","role":"member"},{"task":"join event","can":"0","role":"editor"},{"task":"join event","can":"1","role":"organizer"},{"task":"join event","can":"0","role":"assistant organizer"},{"task":"join event","can":"0","role":""},{"task":"join event","can":"0","role":"member"},{"task":"publish event","can":"0","role":""},{"task":"publish event","can":"0","role":"member"},{"task":"publish event","can":"0","role":"assistant organizer"},{"task":"publish event","can":"0","role":"editor"},{"task":"publish event","can":"1","role":"organizer"},{"task":"publixh event","can":"1","role":"organizer"}]', -60);
INSERT INTO `exposure` VALUES(4, 'normal', 'Standard', 'Anyone can join this group and create events. Organizers choose which events to publish and once published, any group member can join events. People who create events can edit their own events.', '[{"task":"add member","can":"0","role":"editor"},{"task":"add member","can":"0","role":""},{"task":"add member","can":"1","role":"assistant organizer"},{"task":"add member","can":"0","role":"member"},{"task":"add member","can":"1","role":"organizer"},{"task":"create event","can":"1","role":"editor"},{"task":"create event","can":"1","role":"assistant organizer"},{"task":"create event","can":"1","role":"organizer"},{"task":"create event","can":"0","role":""},{"task":"create event","can":"0","role":"member"},{"task":"edit event","can":"1","role":"editor"},{"task":"edit event","can":"0","role":"member"},{"task":"edit event","can":"1","role":"organizer"},{"task":"edit event","can":"0","role":""},{"task":"edit event","can":"1","role":"assistant organizer"},{"task":"edit own event","can":"1","role":"organizer"},{"task":"edit own event","can":"1","role":"editor"},{"task":"edit own event","can":"1","role":"assistant organizer"},{"task":"edit own event","can":"0","role":""},{"task":"edit own event","can":"1","role":"member"},{"task":"join","can":"1","role":"member"},{"task":"join event","can":"1","role":"organizer"},{"task":"join event","can":"1","role":"editor"},{"task":"join event","can":"0","role":""},{"task":"join event","can":"0","role":"member"},{"task":"join event","can":"1","role":"assistant organizer"},{"task":"join group","can":"1","role":"editor"},{"task":"join group","can":"1","role":"organizer"},{"task":"join group","can":"0","role":""},{"task":"join group","can":"1","role":"assistant organizer"},{"task":"join group","can":"1","role":"member"},{"task":"publish event","can":"1","role":"organizer"},{"task":"publish event","can":"1","role":"assistant organizer"},{"task":"publish event","can":"0","role":""},{"task":"publish event","can":"0","role":"member"},{"task":"publish event","can":"1","role":"editor"},{"task":"publixh event","can":"1","role":"organizer"},{"task":"remove event","can":"0","role":"editor"},{"task":"remove event","can":"1","role":"assistant organizer"},{"task":"remove event","can":"0","role":""},{"task":"remove event","can":"1","role":"organizer"},{"task":"remove event","can":"0","role":"member"},{"task":"remove member","can":"0","role":"editor"},{"task":"remove member","can":"0","role":""},{"task":"remove member","can":"0","role":"member"},{"task":"remove member","can":"0","role":"assistant organizer"},{"task":"remove member","can":"1","role":"organizer"},{"task":"remove own event","can":"1","role":"assistant organizer"},{"task":"remove own event","can":"1","role":"organizer"},{"task":"remove own event","can":"0","role":""},{"task":"remove own event","can":"0","role":"member"},{"task":"remove own event","can":"0","role":"editor"},{"task":"see group","can":"1","role":"editor"},{"task":"see group","can":"1","role":"organizer"},{"task":"see group","can":"1","role":""},{"task":"see group","can":"1","role":"assistant organizer"},{"task":"see group","can":"1","role":"member"}]', 0);
INSERT INTO `exposure` VALUES(5, 'self_managed', 'Self Managed Meetup', 'Anyone can create, publicize and join events. Only the original creator of an event can edit the events. ', '[{"task":"create event","can":"1","role":"member"},{"task":"edit own event","can":"1","role":"member"},{"task":"join","can":"1","role":"member"},{"task":"join event","can":"1","role":"member"},{"task":"join group","can":"1","role":"member"},{"task":"publish event","can":"1","role":"member"},{"task":"publixh event","can":"1","role":"organizer"},{"task":"remove own event","can":"1","role":"member"},{"task":"see group","can":"1","role":"member"}]', 10);

SQL;
        foreach (explode(';', $sql) as $sql_line) {
            $this->table()->getAdapter()->query($sql_line);
        }
    }

}
